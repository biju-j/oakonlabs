<!DOCTYPE html>
<html>
<head>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <style>
        /* The "Lock" Overlay */
        #bouncer-screen {
            position: fixed; inset: 0; background: #000; color: white;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 9999; text-align: center;
        }
        /* Hidden content state */
        #dashboard-content { display: none; }
    </style>
</head>
<body>

    <div id="bouncer-screen">
        <h1><p>Authorized Gmail Access Only</p></h1>
        <div id="g_id_onload"
             data-client_id="YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com"
             data-callback="onGoogleSignIn">
        </div>
        <div class="g_id_signin" data-type="standard"></div>
    </div>

    <div id="plays-content">
        <h1>Welcome to Oak plays</h1>
    </div>

    <script>
        // THE WHITELIST: Only these two can enter
        const WHITELIST = ["bijupjana@gmail.com", "sijupjan@gmail.com"];

        function onGoogleSignIn(response) {
            // Decode the Google ID Token
            const base64Url = response.credential.split('.')[1];
            const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
            const user = JSON.parse(window.atob(base64));

            console.log("Checking authorization for:", user.email);

            if (WHITELIST.includes(user.email)) {
                // SUCCESS: Remove bouncer, show content
                document.getElementById('bouncer-screen').style.display = 'none';
                document.getElementById('dashboard-content').style.display = 'block';
                console.log("Access Granted.");
            } else {
                // FAILURE: Keep locked
                alert("Unauthorized! This Gmail account is not on the access list.");
                window.location.href = "/"; // Send them back to homepage
            }
        }
    </script>
</body>
</html>
